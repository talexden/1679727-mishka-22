const Breakpoints={TABLET:768,DESKTOP:1150},dafaultOfsets={mobile:[0,0],tablet:[0,0],desktop:[0,0]};let currentBreakpoint="mobile";const pageMatch=window.location.pathname.match(/^\/(.*)\.html$/),page=pageMatch?pageMatch[1]:"index",ppOffsets=JSON.parse(localStorage.getItem("ppOffsets"))||{[page]:defaultOffsets},ppEl=document.body,saveOffsets=()=>localStorage.setItem("ppOffsets",JSON.stringify(ppOffsets)),setOffsets=()=>{ppEl.style.setProperty("--pp-offset-x",`${ppOffsets[page][currentBreakpoint][0]}px`),ppEl.style.setProperty("--pp-offset-y",`${ppOffsets[page][currentBreakpoint][1]}px`)},setImg=()=>{ppEl.style.setProperty("--pp-img",`url("../img/pixelperfect/${page}-${currentBreakpoint}.jpg")`)},managePP=e=>{e?ppEl.classList.add("pixelperfect"):ppEl.classList.remove("pixelperfect")},movePP=(e,t)=>{ppOffsets[page][currentBreakpoint][0]+=e,ppOffsets[page][currentBreakpoint][1]+=t,saveOffsets(),setOffsets()},changeScreenMode=()=>{const{clientWidth:e}=document.body;let t="mobile";e>=Breakpoints.DESKTOP?t="desktop":e>=Breakpoints.TABLET&&(t="tablet"),currentBreakpoint!==t&&(currentBreakpoint=t,setOffsets(),setImg())};changeScreenMode(),ppOffsets[page]||(ppOffsets[page]=defaultOffsets,saveOffsets()),setOffsets(),setImg(),managePP(Number(localStorage.getItem("pp"))),window.addEventListener("resize",changeScreenMode),document.addEventListener("keydown",(e=>{if(document.activeElement!==document.body)return;const t=Boolean(Number(localStorage.getItem("pp")));if("KeyP"===e.code){e.preventDefault();const p=Number(!t);localStorage.setItem("pp",p),managePP(p)}else t&&"ArrowUp"===e.code?(e.preventDefault(),movePP(0,-1)):t&&"ArrowDown"===e.code?(e.preventDefault(),movePP(0,1)):t&&"ArrowLeft"===e.code?(e.preventDefault(),movePP(-1,0)):t&&"ArrowRight"===e.code&&(e.preventDefault(),movePP(1,0))}));